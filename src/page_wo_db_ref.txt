<link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
  rel="stylesheet"
  integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
  crossorigin="anonymous"
/>

<link
  rel="stylesheet"
  href="../SiteAssets/workorder/vendor/fontawesome-5.9.0/css/all.min.css"
/>

<div id="app">
  <button data-bind="click: NewRequest">New Request</button>
  <button data-bind="click: ViewRequest">View Request</button>
  <ul class="nav nav-tabs" id="section-tabs" role="tablist">
    <li class="nav-item" role="presentation">
      <button
        class="nav-link active"
        id="my-requests-tab"
        data-bs-toggle="tab"
        data-bs-target="#my-requests"
        data-bind="click: TabClicked"
        type="button"
        role="tab"
        aria-controls="my-requests"
        aria-selected="true"
      >
        My Orders
      </button>
    </li>
    <li class="nav-item" role="presentation">
      <button
        class="nav-link"
        id="new-request-tab"
        data-bs-toggle="tab"
        data-bs-target="#new-request"
        data-bind="click: TabClicked"
        type="button"
        role="tab"
        aria-controls="new-request"
        aria-selected="true"
      >
        New Order
      </button>
    </li>
    <li class="nav-item active" role="presentation">
      <button
        class="nav-link"
        id="request-detail-tab"
        data-bs-toggle="tab"
        data-bs-target="#request-detail"
        data-bind="click: TabClicked"
        type="button"
        role="tab"
        aria-controls="request-detail"
        aria-selected="false"
      >
        Detail View
      </button>
    </li>
  </ul>
  <div class="tab-content">
    <div
      class="tab-pane active"
      role="tabpanel"
      aria-labelledby="my-requests-tab"
      id="my-requests"
    >
      <p>Open Requests Here</p>
      <ul data-bind="foreach: Config.requestOrgStore">
        <li data-bind="text: ID"></li>
      </ul>
    </div>
    <div
      class="tab-pane"
      role="tabpanel"
      aria-labelledby="new-request"
      id="new-request"
    >
      <div
        data-bind="template: {name: 'tmpl-new-request-view', data: NewRequestView}"
      ></div>
    </div>
    <div
      id="request-detail"
      class="tab-pane"
      role="tabpanel"
      aria-labelledby="request-detail-tab"
    >
      <div
        data-bind="template: {name: 'tmpl-request-detail', data: RequestDetailView}"
      ></div>
    </div>
  </div>
</div>
<div id="service-type-templates"></div>

<div id="tmpl-views">
  <script type="text/html" id="tmpl-new-request-view">
    <h2>Select the type of work order you would like to open:</h2>
    <div class="container text-center">
      <div class="row row-cols-4" data-bind="foreach: ServiceTypeStore">
        <div class="col">
          <div class="card text-center" data-bind="click: $root.NewRequest">
            <div class="card-body">
              <i class="fa fa-5x" data-bind="class: Icon"></i>
            </div>
            <div class="card-body">
              <h5 class="card-title" data-bind="text: Title"></h5>
            </div>
          </div>
        </div>
      </div>
    </div>
  </script>
  <script type="text/html" id="tmpl-request-detail">
    <!-- Report.RequestDetailView -->
    <div>
      <h2>Service Request Detail</h2>
      <!-- ko if: !$data -->
      <div>Nothing to see here</div>
      <!-- /ko -->
      <!-- ko if: $data -->
      <div>
        <div>
          <div
            data-bind="template: {name: 'tmpl-request-header', data: RequestHeader}"
          ></div>
        </div>
        <!-- ko if: ServiceTypeTemplate() && !ServiceTypeTemplate().IsLoading() -->
        <div class="card" data-bind="using: ServiceTypeTemplate">
          <div class="card-body">
            <h3 class="card-title" data-bind="text: ServiceType.Title"></h3>

            <div
              data-bind="template: {name: TemplateElmId, data: TemplateViewModel}"
            ></div>
          </div>
        </div>
        <!-- /ko -->
        <!-- ko if: DisplayMode() == DisplayModes.New -->
        <button type="button" data-bind="click: SubmitNewRequest">
          Submit
        </button>
        <!-- /ko -->
        <!-- ko if: DisplayMode() == DisplayModes.View -->
        <button type="button" data-bind="click: EditRequest">Edit</button>
        <!-- /ko -->
        <!-- ko if: DisplayMode() == DisplayModes.Edit -->
        <button type="button" data-bind="click: UpdateRequest">
          Save Changes
        </button>
        <button type="button" data-bind="click: CancelChanges">Cancel</button>
        <!-- /ko -->
      </div>
      <!-- /ko -->
    </div>
  </script>
  <script type="text/html" id="tmpl-request-header">
    <!-- Report.RequestDetail.RequestHeader -->
    <div class="card">
      <div class="card-body">
        <h3 class="card-title">Requestor Information</h3>
        <!-- ko if: $data -->
        <!-- ko if: DisplayMode() == DisplayModes.New -->
        <div data-bind="using: FieldMap">
          <div>
            <p data-bind="text: Title.obs()"></p>
            <input data-bind="value: Title.obs" />
          </div>
        </div>
        <!-- /ko -->
        <!-- /ko -->
        <!-- ko if: !$data -->
        <div>Nothing to see here</div>
        <!-- /ko -->
      </div>
    </div>
  </script>
</div>
<script
  type="text/javascript"
  src="../Apps/_layouts/15/clienttemplates.js"
></script>
<script
  type="text/javascript"
  src="../Apps/_layouts/15/clientforms.js"
></script>
<script
  type="text/javascript"
  src="../Apps/_layouts/15/clientpeoplepicker.js"
></script>
<script type="text/javascript" src="../Apps/_layouts/15/autofill.js"></script>

<script src="../SiteAssets/workorder/vendor/knockout/knockout-3.5.0.js"></script>

<script
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
  crossorigin="anonymous"
></script>

<script defer type="module" src="../SiteAssets/wo/page_wo_db.js">
  // // import { createApp } from "vue";
  // import WorkOrderDataBase from "../SiteAssets/wo/page_wo_db.js";

  // createApp(WorkOrderDataBase).mount("#app");
</script>
