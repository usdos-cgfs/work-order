<link
  rel="stylesheet"
  href="../SiteAssets/workorder/vendor/jquery/jquery-ui-1.12.1.full/jquery-ui.css"
/>
<link
  rel="stylesheet"
  href="../SiteAssets/workorder/vendor/jquery/jquery-ui-1.12.1.full/jquery-ui.theme.css"
/>
<link
  rel="stylesheet"
  href="../SiteAssets/workorder/vendor/fontawesome-5.9.0/css/all.min.css"
/>
<link
  rel="stylesheet"
  href="../SiteAssets/workorder/vendor/Semantic-UI-CSS-master/semantic.min.css"
/>

<!-- ko if: typeof vm._report != 'undefined' -->
<div id="pageReport">
  <div class="ui form">
    <div class="two wide field">
      <label
        >Organization:<select
          data-bind="value: _report.requestOrg,
          optionsText: 'Title',
          options: _report.requestOrgOpts"
        ></select
      ></label>
    </div>
    <div class="two wide field">
      <label
        >View:<select
          data-bind="value: _report.view, options: _report.viewOpts"
        ></select
      ></label>
    </div>
    <div class="two wide field">
      <label
        >Action Office:<select
          data-bind="value: _report.filterOffice, 
          optionsText: 'Title',
          options: _report.filterOfficeOpts(),
          optionsCaption: 'Select...'"
        ></select
      ></label>
    </div>
    <!-- ko if: _report.view() != "Open" -->
    <div class="field">
      <div class="">
        <label
          >All Dates
          <input type="checkbox" data-bind="checked: _report.allDates" />
        </label>
      </div>
    </div>
    <!-- <div class="two fields" data-bind="if: !_report.allDates()"> -->
    <div class="two fields">
      <div class="field">
        <label
          >Start Date:
          <input
            type="date"
            data-bind="
            disable: _report.allDates(),
            date: _report.startDate"
          />
        </label>
      </div>
      <div class="field">
        <label
          >End Date:
          <input
            type="date"
            data-bind="
            disable: _report.allDates(), 
            date: _report.endDate"
          />
        </label>
      </div>
    </div>
    <!-- /ko -->
  </div>
  <!-- ko if: _report.tableResults -->
  <table class="tablesorter report">
    <thead>
      <tr>
        <td></td>
        <td></td>
        <td data-bind="text: _report.completedTotalWO.val"></td>
        <td data-bind="text: _report.completedTotalMtgStandard.val"></td>
        <td data-bind="text: _report.completedTotalNotMtgStandard.val"></td>
        <td></td>
        <td></td>
        <td data-bind="text: _report.completedTotalMtgStandardPerc"></td>
        <td data-bind="text: _report.completedTotalAvgDaysFloat">
          Avg Completion Time (Days)
        </td>
      </tr>
      <tr>
        <td>Service Type</td>
        <td>Standard</td>
        <td data-bind="text: _report.view() == 'Open' ? 'Open' : 'Complete'"></td>
        <td># Meeting Standard</td>
        <td># Not Meeting Standard</td>
        <td>KPI</td>
        <td>Late</td>
        <td>% Meeting Standard</td>
        <td>Avg Completion Time (Days)</td>
      </tr>
    </thead>
    <tbody data-bind="foreach: _report.tableResults">
      <tr>
        <td data-bind="text: title"></td>
        <td data-bind="text: standard"></td>
        <td data-bind="text: completedWO"></td>
        <td data-bind="text: completedMeetingStandard"></td>
        <td data-bind="text: completedNotMeetingStandard"></td>
        <td>
          <span data-bind="if: completedPercMeetingStandard >= $root._report.thresholdGreen() && completedWO > 0"><img src='../PublishingImages/KPIGreen.GIF'></img></span>
          <span data-bind="if: completedPercMeetingStandard < $root._report.thresholdGreen() && completedPercMeetingStandard >= $root._report.thresholdYellow() && completedWO > 0"><img src='../PublishingImages/KPIGold.GIF'></img></span>
          <span data-bind="if: completedPercMeetingStandard < $root._report.thresholdYellow() && completedWO > 0"><img src='../PublishingImages/KPIRed.GIF'></img></span>
        </td>
        <td>
          <span
            class="lateIDContainers"
            data-bind="visible: lateIDs.length > 0, toggleClick: $data, toggleClass: 'collapsed', classContainer: '.lateID-item'"
          >
            <span class="ui-icon ui-icon-search"></span>
            <a href="javascript:void(0)">View Late IDs</a>

            <!-- ko foreach: lateIDs-->
            <div class="lateID-item collapsed">
              <a
                target="_blank"
                data-bind="attr: { href: $root.requestLinkAdmin() + title}"
                >[<span data-bind="text: title"></span> /
                <span data-bind="text: days"></span>]</a
              >
            </div>
            <!-- /ko -->
          </span>
          <!-- <span data-bind="visible: lateIDs.length > 0">
            ko foreach: lateIDs
            <div class="">
              <a target="_blank" data-bind="attr: {href: '../'}"
                ><span data-bind="text: ID"></span
              ></a>
            </div>
             /ko
          </span> -->
        </td>
        <td data-bind="text: completedPercMeetingStandard"></td>
        <td data-bind="text: completedAvgTime"></td>
      </tr>
    </tbody>
    <tfoot></tfoot>
  </table>
  <div>
    Filter Applied in
    <span data-bind="text: _report.timerDelta() /1000"></span>
    s
  </div>
  <!-- /ko -->
</div>
<!-- /ko -->
<!-- 
<script src="../SiteAssets/workorder/vendor/jquery/jquery-3.3.1.min.js"></script>
<script src="../SiteAssets/workorder/common/common.js"></script>
<script src="../SiteAssets/workorder/common/sal.js"></script>
<script src="../SiteAssets/workorder/wo/viewmodels.js"></script>
<script src="../SiteAssets/workorder/wo/workorder.js"></script> -->
<script src="../SiteAssets/workorder/wo/page_report.js"></script>
