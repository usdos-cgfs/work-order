<script type="text/html" id="template_env_warn">
  <div style="display: none" class="ui warning message">
    <div class="header">This system is currently in open beta testing</div>
    <p>
      Please report issues to:
      <a href="mailto:cgfssharepoint@state.gov?subject='Workorder UAT Feedback'"
        >cgfssharepoint@state.gov</a
      >
    </p>
    <p>Your assistance is greatly appreciated.</p>
  </div>
</script>

<script type="text/html" id="tmpl_pipeline">
  <div></div>
</script>

<script type="text/html" id="template_dateranges">
  <div>
    <table class="ui very basic table">
      <thead>
        <tr>
          <th>#</th>
          <th>Start</th>
          <th>End</th>
          <th>Label</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody data-bind="">
        <!-- ko foreach: $data.dateRanges -->
        <tr>
          <td data-bind="text: $index"></td>
          <td data-bind="text: $parent.formatColumnDate(StartDateTime)"></td>
          <td data-bind="text: $parent.formatColumnDate(EndDateTime)"></td>
          <td data-bind="text: Label"></td>
          <td>
            <!-- ko if: $root.currentView() != 'view' -->
            <span
              class="fas fa-trash pointer"
              data-bind="click: deleteDateRange.bind($data)"
            ></span>
            <!-- /ko -->
          </td>
        </tr>
        <!-- /ko -->
        <!-- ko if: $root.currentView() != 'view' -->
        <tr>
          <td></td>
          <td>
            <div class="field">
              <div class="ui calendar">
                <div class="ui fill input left icon">
                  <i class="calendar icon"></i>
                  <input
                    type="text"
                    placeholder="Start"
                    data-bind="dateField: $data.new.start"
                  />
                </div>
              </div>
            </div>
          </td>
          <td>
            <div class="field">
              <div class="ui calendar">
                <div class="ui fill input left icon">
                  <i class="calendar icon"></i>
                  <input
                    type="text"
                    placeholder="End"
                    data-bind="dateField: $data.new.end"
                  />
                </div>
              </div>
            </div>
          </td>
          <td>
            <div class="ui input fill field">
              <input
                class="ui input fill"
                type="text"
                placeholder="Label (optional)..."
                data-bind="value: $data.new.label"
              />
            </div>
          </td>
          <td>
            <button
              type="button"
              class="ui green button"
              data-bind="click: $data.new.save"
            >
              Add <i class="fas fa-plus"></i>
            </button>
          </td>
        </tr>
        <!-- /ko -->
      </tbody>
    </table>
  </div>
</script>

<!-- Our Page Busy Full Page Loader -->
<script type="text/html" id="template_loader">
  <div
    class="ui page dimmer"
    data-bind="class: busy.tasks().length ? 'active' : ''"
  >
    <div class="ui text loader">
      <table
        class="ui very compact basic inverted fixed table"
        id="busy-message"
      >
        <tbody>
          <!-- ko foreach: busy.tasks -->
          <tr>
            <td class="ui right floated" data-bind="text: task"></td>
            <td data-bind="text: active() ? '' : 'Done'"></td>
          </tr>
          <!-- /ko -->
        </tbody>
      </table>
    </div>
  </div>
</script>

<script type="text/html" id="template_attachments">
  <div id="wo-attachments" class="ui fluid card" data-bind="">
    <div class="content">
      <h2 class="ui header">
        Attachments
        <span data-bind="visible: selectedServiceType().AttachmentsRequiredCnt"
          >Required<span class="required">*</span></span
        >
      </h2>
    </div>
    <div class="content">
      <div
        data-bind="class: selectedServiceType().AttachmentsRequiredCnt ? 
         'warning' : 'info'"
        class="ui message"
      >
        <div data-bind="text: attachmentMessage"></div>
      </div>
      <div
        id="instr-attachments"
        data-bind="html: selectedServiceType().AttachmentDescription"
      ></div>
      <table
        id="table-attachments"
        class="ui very basic celled table"
        data-bind="visible: requestAttachments().length > 0"
      >
        <thead>
          <tr>
            <th>Title</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody
          data-bind="foreach: requestAttachments().filter(function(att) {return att.IsActive})"
        >
          <tr>
            <td>
              <a
                target="_blank"
                data-bind="attr: { href: FileRef }, text: Title"
              ></a>
            </td>
            <td>
              <i
                class="fas fa-search pointer"
                data-bind="click: $root.attachmentView"
              ></i>
              <i
                class="fas fa-trash pointer"
                data-bind="click: $root.attachmentRemove"
              ></i>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <!-- ko if: requestIsActive -->
    <div class="content aligned right">
      <button type="button" class="ui primary button" onclick="newAttachment()">
        New Attachment
      </button>
    </div>
    <!-- /ko -->
  </div>
</script>

<script type="text/html" id="template_actions">
  <div id="wo-approvals" class="ui styled fluid accordion">
    <div class="title">
      <h2 class="ui header">
        <i class="dropdown icon"></i>
        Approvals and Actions Log
      </h2>
    </div>
    <div class="content">
      <!--<div class="admin-action-zone" data-bind="visible: pu10kShowAdmin">
                        <h3>Administrative Action Zone</h3>
                        <p>This purchase request requires your approval:</p>
                        <button type="button" href="javascript:void(0)" onclick="newApproval()">Approve/Reject</button>
                    </div>
                    <div data-bind="visible: requestApprovals().length == 0">
                        <p>This request has not been approved yet, check back later.</p>
                    </div>-->
      <table
        id="table-actions"
        class="ui celled very basic table"
        data-bind="visible: requestActions().length > 0"
      >
        <thead>
          <tr>
            <th>Action Taker</th>
            <th>Action Type</th>
            <th>Description</th>
            <th>Date</th>
          </tr>
        </thead>
        <tbody data-bind="foreach: requestActions">
          <tr>
            <td class="collapsing">
              <p data-bind="text: Author.get_lookupValue()"></p>
            </td>
            <td class="collapsing">
              <p data-bind="text: ActionType"></p>
            </td>
            <td>
              <p data-bind="text: Description"></p>
            </td>
            <td class="right aligned collapsing">
              <p data-bind="text: Created.toLocaleString()"></p>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</script>

<script type="text/html" id="template_comments">
  <div id="wo-comments" class="ui fluid card service-type-detail">
    <div class="content">
      <h2 class="ui header">Comments</h2>
    </div>
    <div class="content">
      <div class="ui warning message">
        Note: Anyone with access to this record is able to view comments.
      </div>
      <table
        id="table-comments"
        class="ui celled very basic table"
        data-bind="visible: requestComments().length > 0"
      >
        <thead>
          <tr>
            <th>Author</th>
            <th>Comment</th>
            <th>Date</th>
          </tr>
        </thead>
        <tbody data-bind="foreach: requestComments">
          <tr>
            <td class="collapsing">
              <p data-bind="text: Author.get_lookupValue()"></p>
            </td>
            <td>
              <p data-bind="text: Comment"></p>
            </td>
            <td class="right aligned collapsing">
              <p data-bind="text: Created.toLocaleString()"></p>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <!-- ko if: requestIsActive() -->
    <div class="content">
      <div class="ui form">
        <p>Provide additional comments/instructions here:</p>
        <div class="field">
          <textarea
            placeholder="Enter a new comment..."
            data-bind="value: commentNew"
          ></textarea>
        </div>
        <button
          type="button"
          class="ui primary button"
          onclick="submitComment()"
        >
          Submit Comment
        </button>
      </div>
    </div>
    <!-- /ko -->
  </div>
</script>
